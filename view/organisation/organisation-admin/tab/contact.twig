<h2>{{ translate("txt-contact-list") }}</h2>

<p class="lead">{{ translate("txt-contact-list-explanation") }}</p>

{% if organisationService.getContactCount(organisation) > 0 %}
    <table class="table table-striped table-hover">
        <thead>
        <tr>
            <th>{{ translate('txt-name') }}</th>
            <th>{{ translate('txt-email') }}</th>
            <th>{{ translate('txt-country') }}</th>
            <th>{{ translate("txt-projects") }}</th>
        </tr>
        </thead>
        <tfoot>
        </tfoot>
        <tbody>
        {% for contactOrganisation in organisation.contactOrganisation %}
            {% set contact = contactOrganisation.contact %}
            {% set contactService = contactServiceProxy(contact) %}

            <tr {% if contact.dateEnd %}class="danger"{% endif %}>
                <td>{{ contactLink(contact, 'view-admin', 'name') }} {% if contact.dateEnd %}({{ translate("txt-expired-on-%s")|format(contact.dateEnd|date("d-m-Y")) }}){% endif %}{{ contactLink(contact, 'edit-admin', 'icon') }}</td>
                <td>{{ contact.email }} <a href="mailto:{{ contact.email }}"><i class="fa fa-envelope-o"></i> </a></td>
                <td>{{ contact.contactOrganisation.organisation.country }}</td>
                <td>{{ contactLink(contact,'view-admin','alternativeShow',null, projectService.findProjectParticipationByContact(contact)|length,'project') }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
{% else %}
    {{ ztbalert().info(translate("txt-no-contact-found"))|raw }}
{% endif %}
